var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,o=(e,t,a)=>(r(e,"symbol"!=typeof t?t+"":t,a),a);import{E as i,a as l,b as s,B as d,T as c,c as p,R as m,d as u}from"./vendor.caf4736e.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,o)=>{const i=new URL(e,n);if(self[t].moduleMap[i])return a(self[t].moduleMap[i]);const l=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),s=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){o(new Error(`Failed to import: ${e}`)),r(s)},onload(){a(self[t].moduleMap[i]),r(s)}});document.head.appendChild(s)})),self[t].moduleMap={}}}("/assets/");i.defaults.baseURL="http://127.0.0.1:8080",i.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",i.defaults.transformRequest=[function(e){let t;if(e&&e.file){t=new FormData,t.append("file",e.file),delete e.file;for(let a in e)t.append(a,e[a])}else{t="";for(let a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&"}return t}],i.defaults.timeout=1e4,i.interceptors.response.use((e=>200==e.status?Promise.resolve(e):Promise.reject(e)),(e=>{l.error(`异常请求：${JSON.stringify(e.message)}`)}));var h={post:(e,t)=>new Promise(((a,n)=>{i({method:"post",url:e,data:t}).then((e=>{let t=e.data;2==t.error?l.error(t.info):a(t)})).catch((e=>{n(e)}))})),get:(e,t)=>new Promise(((a,n)=>{i({method:"get",url:e,params:t}).then((e=>{let t=e.data;2==t.error?l.error(t.info):a(t)})).catch((e=>{n(e)}))}))};const g=[{title:"title",dataIndex:"title",width:"40%"},{title:"author",dataIndex:"author",width:"20%"},{title:"reply_num",dataIndex:"reply_num",width:"10%"},{title:"good",dataIndex:"good",width:"10%"},{title:"Action",dataIndex:"s",width:"20%"}];class f extends s.Component{constructor(){super(...arguments),o(this,"state",{data:[],pagination:{currentPage:1,pageSize:10},loading:!1}),o(this,"fetch",((e={})=>{this.setState({loading:!0});const{pagination:t}=e;(async(e={})=>h.get("/getThreadList",e))(t?{currentPage:t.current,pageSize:t.pageSize}:this.state.pagination).then((e=>{this.setState({data:e.data.list,loading:!1,pagination:{total:e.data.pagination.total,pageSize:e.data.pagination.pageSize,currentPage:e.data.pagination.currentPage}})}))})),o(this,"handleTableChange",((e,o,i)=>{this.fetch(((e,o)=>{for(var i in o||(o={}))t.call(o,i)&&r(e,i,o[i]);if(a)for(var i of a(o))n.call(o,i)&&r(e,i,o[i]);return e})({sortField:i.field,sortOrder:i.order,pagination:e},o))}))}render(){return s.createElement("div",{className:"Thread"},s.createElement(d,{type:"primary",onClick:()=>this.fetch()},"get List"),s.createElement("h1",null,"get thread"),s.createElement(c,{columns:g,rowKey:this.state.data.id,dataSource:this.state.data,pagination:this.state.pagination,loading:this.state.loading,onChange:this.handleTableChange}))}}function w(){return s.useState(0),s.useEffect((()=>{console.log("生命周期")}),[]),s.createElement("div",{className:"App"},s.createElement(s.Fragment,null,s.createElement(p,null,s.createElement("div",null,s.createElement(m,{path:"/",exact:!0,component:f})))))}u.render(s.createElement(s.StrictMode,null,s.createElement(w,null)),document.getElementById("root"));
